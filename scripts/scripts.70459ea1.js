"use strict";angular.module("bluesoftApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",auth:!0}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/item/:id/editar",{templateUrl:"views/item.html",controller:"ItensdetailCtrl"}).otherwise({redirectTo:"/login"})}]).run(["$rootScope","$location","$cookieStore","$http",function(a,b,c,d){a.globals=c.get("globals")||{},a.globals.currentUser&&(d.defaults.headers.common.Authorization="Basic "+a.globals.currentUser.authdata),a.$on("$locationChangeStart",function(c,d,e){"/login"===b.path()||a.globals.currentUser||b.path("/login")}),a.$on("$routeChangeStart",function(c,d,e){"/login"!==b.path()?a.isLoggedIn=!0:a.isLoggedIn=!1})}]),angular.module("bluesoftApp").controller("MainCtrl",["$scope",function(a){}]),angular.module("bluesoftApp").controller("LoginCtrl",["$scope","$rootScope","$location","AuthenticationService",function(a,b,c,d){d.ClearCredentials(),a.login=function(){a.dataLoading=!0,d.Login(a.username,a.password,function(b){b.success?(d.SetCredentials(a.username,a.password),c.path("/")):(a.error=b.message,a.dataLoading=!1)})}}]),angular.module("bluesoftApp").factory("AuthenticationService",["Base64","$http","$cookieStore","$rootScope","$timeout",function(a,b,c,d,e){var f={};return f.Login=function(a,b,c){e(function(){var d={success:"test"===a&&"test"===b};d.success||(d.message="Usuário e senha incorretos"),c(d)},1e3)},f.SetCredentials=function(e,f){var g=a.encode(e+":"+f);d.globals={currentUser:{username:e,authdata:g}},b.defaults.headers.common.Authorization="Basic "+g,c.put("globals",d.globals)},f.ClearCredentials=function(){d.globals={},c.remove("globals"),b.defaults.headers.common.Authorization="Basic "},f}]).factory("Base64",function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(b){var c,d,e,f,g,h="",i="",j="",k=0;do c=b.charCodeAt(k++),d=b.charCodeAt(k++),i=b.charCodeAt(k++),e=c>>2,f=(3&c)<<4|d>>4,g=(15&d)<<2|i>>6,j=63&i,isNaN(d)?g=j=64:isNaN(i)&&(j=64),h=h+a.charAt(e)+a.charAt(f)+a.charAt(g)+a.charAt(j),c=d=i="",e=f=g=j="";while(k<b.length);return h},decode:function(b){var c,d,e,f,g,h="",i="",j="",k=0,l=/[^A-Za-z0-9\+\/\=]/g;l.exec(b)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");do e=a.indexOf(b.charAt(k++)),f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),j=a.indexOf(b.charAt(k++)),c=e<<2|f>>4,d=(15&f)<<4|g>>2,i=(3&g)<<6|j,h+=String.fromCharCode(c),64!=g&&(h+=String.fromCharCode(d)),64!=j&&(h+=String.fromCharCode(i)),c=d=i="",e=f=g=j="";while(k<b.length);return h}}}),angular.module("bluesoftApp").controller("UserCtrl",["$scope",function(a){a.username="test"}]),angular.module("bluesoftApp").controller("ItensCtrl",["$scope","Item",function(a,b){a.itens=b.all(),a.adicionaItem=function(b){a.itens.push({id:a.itens.length+1,produto:a.item.produto,quantidade:a.item.quantidade,comprado:!1}),a.item.produto=a.item.quantidade=""},a.editarItem=function(b){a.itens.push({produto:a.item.produto,quantidade:a.item.quantidade})},a.deletarItem=function(b){for(var c=a.itens.length-1;c>=0;c--)a.itens[c].produto==b.produto&&a.itens.splice(c,1)}}]),angular.module("bluesoftApp").controller("ItensdetailCtrl",["$scope","$routeParams","Item",function(a,b,c){a.item=c.get(b.id)}]),angular.module("bluesoftApp").factory("Item",function(){var a=[{id:1,produto:"Refrigerante",quantidade:2,comprado:!1},{id:2,produto:"Cerveja",quantidade:100,comprado:!1},{id:3,produto:"Garrafa de água",quantidade:1,comprado:!1},{id:4,produto:"Carvão",quantidade:3,comprado:!1},{id:5,produto:"Pão",quantidade:12,comprado:!1}];return{all:function(){return a},get:function(b){var c=null;return angular.forEach(a,function(a){console.log(a),a.id==b&&(c=a)}),c}}}),angular.module("bluesoftApp").run(["$templateCache",function(a){a.put("views/item.html",'<div class="item"> <div class="alert alert-success" ng-show="success">Produto {{ item.produto }} editado com sucesso</div> <div ng-show="error" class="alert alert-danger">{{error}}</div> <form name="form" role="form"> <fieldset> <div class="form-group"> <label for="produto">Produto</label> <input type="text" name="produto" id="produto" class="form-control" placeholder="" value="{{ item.produto }}" ng-model="item.produto" required> <span ng-show="form.produto.$dirty && form.produto.$error.required" class="help-block red">Usuário é necessário</span> </div> <div class="form-group"> <label for="quantidade">Quantidade</label> <input type="number" id="quantidade" class="form-control" placeholder="" value="{{ item.quantidade }}" ng-model="item.quantidade"> </div> <div class="checkbox"> <label> <input type="checkbox" ng-model="item.comprado">já foi comprado? </label> </div> <br> <button ng-disabled="form.$invalid" type="submit" ng-click="editarItem(item); success=true" class="btn btn-primary">Salvar</button> <a class="pull-right" href="#/">voltar à lista de compras</a> </fieldset> </form> </div>'),a.put("views/login.html",'<div class="alert alert-info"> Usuário: test<br> Senha: test </div> <div ng-show="error" class="alert alert-danger">{{error}}</div> <form name="form" ng-submit="login()" role="form"> <div class="form-group"> <label for="username">Username</label> <i class="fa fa-key"></i> <input type="text" name="username" id="username" class="form-control" placeholder="usuario" ng-model="username" required> <span ng-show="form.username.$dirty && form.username.$error.required" class="help-block">produto é necessário</span> </div> <div class="form-group"> <label for="password">Password</label> <i class="fa fa-lock"></i> <input type="password" name="password" id="password" class="form-control" placeholder="senha" ng-model="password" required> <span ng-show="form.password.$dirty && form.password.$error.required" class="help-block">Senha é necessária</span> </div> <div class="form-actions"> <button type="submit" ng-disabled="form.$invalid || dataLoading" class="btn btn-danger">Login</button> <img ng-if="dataLoading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="> </div> </form>'),a.put("views/main.html",'<div ng-controller="MainCtrl"> <div ng-controller="ItensCtrl"> <div class="panel panel-default"> <div class="panel-heading"><span class="glyphicon glyphicon-upload" aria-hidden="true"></span> Adicionar produto</div> <div class="panel-body"> <form class="form-inline" name="formItem"> <div class="col-md-4"> <div class="input-group"> <input type="text" placeholder="produto" class="form-control" aria-label="..." ng-model="item.produto"> </div> </div> <div class="col-md-4"> <div class="input-group"> <input type="number" placeholder="quantidade" class="form-control" aria-label="..." ng-model="item.quantidade"> </div> </div> <div class="col-md-4"> <button class="btn btn-primary" ng-click="adicionaItem()">adicionar</button> </div> </form> </div> </div> <div class="panel panel-default"> <div class="panel-heading"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> Lista de produtos</div> <div class="panel-body"> <table class="table table-hover itens"> <thead> <tr> <th>Comprado</th> <th>Produto</th> <th>Quantidade</th> <th>ações</th> </tr> </thead> <tbody> <tr ng-repeat="item in itens"> <td><input type="checkbox" ng-model="item.comprado"></td> <td>{{ item.produto }}</td> <td>{{ item.quantidade }}</td> <td> <a class="glyphicon glyphicon-edit" title="editar" href="#/item/{{item.id}}/editar"></a> <a class="glyphicon glyphicon-remove-sign red" title="remover" href ng-click="deletarItem(item)"></a> </td> </tr> </tbody> </table> </div> </div> </div> </div>')}]);